(function(){var t,e,o,i,n,r,u,s,f=function(t,e){return function(){return t.apply(e,arguments)}};i=function(){return"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports:"undefined"!=typeof window?window.FWI:"undefined"!=typeof t?t:void 0},"undefined"!=typeof window&&(window.FWI={}),e=function(t,e,o,i){var n,r,u,s,f,h,p,b,y,c,l,a;for(r=8,h=23,i&&(r=11,h=52),n=(1<<r-1)-1,isNaN(t)?(u=(1<<n)-1,p=1,a=0):t===1/0||t===-(1/0)?(u=(1<<n)-1,p=0,a=0>t?1:0):0===t?(u=0,p=0,a=0):(a=0>t?1:0,0>t&&(t=-t),t>=Math.pow(2,1-n)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),n),u=f+n,p=Math.floor(t*Math.pow(2,h-f)-Math.pow(2,h))):(u=0,p=Math.floor(t/Math.pow(2,1-n-h)))),c=s=0,l=i?8:4;l>=0?l>s:s>l;c=l>=0?++s:--s)e[o+c]=0;return void(i?(1===a&&(e[o+7]=128),e[o+7]|=u>>4,e[o+6]|=(15&u)<<4,b=0|p,0>b&&(b+=4294967296),y=p-b,y/=4294967296,e[o+6]|=y>>16&15,e[o+5]|=y>>8&255,e[o+4]|=255&y,e[o+3]|=b>>24&255,e[o+2]|=b>>16&255,e[o+1]|=b>>8&255,e[o]|=255&b):(1===a&&(e[o+3]=128),e[o+3]|=u>>1,e[o+2]|=(1&u)<<7,e[o+2]|=p>>16&127,e[o+1]|=p>>8&255,e[o]|=255&p))},o=function(t,e,o){var i,n,r,u,s,f,h,p,b,y,c,l,a,_,d,v,g,w,m,M,B,k;for(i=t[e],n=t[e+1],u=t[e+2],s=t[e+3],o&&(f=t[e+4],y=t[e+5],c=t[e+6],l=t[e+7]),v=i|n<<8|u<<16,g=0,k=1,p=0,h=1,d=0,b=127,o&&(b=1023),o?(p=c|l<<8,k=0!==(128&l)?-1:1,h=(p>>4&2047)-b,g=s|f<<8|y<<16|c<<24,d=52):(p=u|s<<8,k=0!==(128&s)?-1:1,h=(p>>7&255)-b,d=23),w=1,-127===h&&(w=0,h=-126),m=_=1,B=d;B>=1?B>=_:_>=B;m=B>=1?++_:--_)a=Math.pow(2,-m),r=d-m,M=!1,M=r>=24?0!==(g&1<<r-24):0!==(v&1<<r),M&&(w+=a);return 128===h&&1===w?k*(1/0):128===h&&w>1?0/0:h+b===0&&1===w?0:k*Math.pow(2,h)*w},s=function(){return function(t,e){return o(t,e,!1)}}(this),u=function(){return function(t,e){return o(t,e,!0)}}(this),r=function(){return function(t,o,i){return e(i,t,o,!1)}}(this),n=function(){return function(t,o,i){return e(i,t,o,!0)}}(this),t={},t.util={},t.util.exports=i,t.util.extend=function(t,e){var o,i;for(i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i]);return o=function(){return this.constructor=t,this},o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},t.create_block_type=function(e,o){var i;return i={},i[e]=function(){return i[e].__super__.constructor.call(this,o)},t.util.extend(i[e],t.Block),i[e]},t.ByteBuffer=function(){function t(){this.bytes=null,this.length=0}return t.prototype.allocate=function(t){var e,o,i;for(this.bytes=[],this.length=t,o=e=0,i=this.length;i>=0?i>e:e>i;o=i>=0?++e:--e)this.bytes[o]=0;return void 0},t.prototype.map_to_string=function(t){var e,o,i,n,r;for(r=[],i=o=0,n=this.length;n>=0?n>o:o>n;i=n>=0?++o:--o)e=t.charCodeAt(i),e===0/0&&(e=0),r.push(this.bytes[i]=e);return r},t.prototype.free=function(){return this.bytes=null,void(this.length=0)},t}(),t.Block=function(){function e(t){this.get_i64=f(this.get_i64,this),this.set_i64=f(this.set_i64,this),this.get_u64=f(this.get_u64,this),this.set_u64=f(this.set_u64,this),this.size=t,this.buf=null,this.children={},this.off=0}return e.prototype.update_children=function(){var t,e,o;for(o in this.children)e=this.children[o],t=Number(o)+this.off,e.map_to(this.buf,t);return void 0},e.prototype.allocate=function(){return this.buf=new t.ByteBuffer,this.buf.allocate(this.size),this.off=0,void this.update_children()},e.prototype.from_string=function(t){return void this.buf.map_to_string(t)},e.prototype.map_to=function(t,e){return this.buf=t,this.off=e,void this.update_children()},e.prototype.get_bytes=function(){var t,e,o,i;for(i=[],t=e=0,o=this.size;o>=0?o>e:e>o;t=o>=0?++e:--e)i[t]=this.buf.bytes[this.off+t];return i},e.prototype.free=function(){return this.buf=null,void(this.off=0)},e.prototype.get_child=function(t,e){var o,i;return o=e+this.off,null!=this.children[e]?this.children[e]:(i=new t,i.map_to(this.buf,o),this.children[e]=i,i)},e.prototype.set_bool=function(t,e){return t+=this.off,void(this.buf.bytes[t]^=(-(val?1:0)^this.buf.bytes[t])&1<<e)},e.prototype.get_bool=function(t,e){return 0!==(this.buf.bytes[t+this.off]&1<<e)},e.prototype.set_u8=function(t,e){return void(this.buf.bytes[t+this.off]=255&e)},e.prototype.get_u8=function(t){return this.buf.bytes[t+this.off]},e.prototype.set_i8=function(t,e){return void(this.buf.bytes[t+this.off]=255&e)},e.prototype.get_i8=function(t){var e;return e=this.buf.bytes[t+this.off],e>127&&(e-=256),e},e.prototype.set_u16=function(t,e){var o;return e&=65535,o=t+this.off,this.buf.bytes[o+1]=e>>8&255,void(this.buf.bytes[o]=255&e)},e.prototype.get_u16=function(t){var e;return e=t+this.off,this.buf.bytes[e]|this.buf.bytes[e+1]<<8},e.prototype.set_i16=function(t,e){var o;return e&=65535,o=t+this.off,this.buf.bytes[o+1]=e>>8&255,void(this.buf.bytes[o]=255&e)},e.prototype.get_i16=function(t){var e,o;return e=t+this.off,o=this.buf.bytes[e]|this.buf.bytes[e+1]<<8,o>32767&&(o-=65536),o},e.prototype.set_u32=function(t,e){var o;return e&=4294967295,o=t+this.off,this.buf.bytes[o+3]=e>>24&255,this.buf.bytes[o+2]=e>>16&255,this.buf.bytes[o+1]=e>>8&255,void(this.buf.bytes[o]=255&e)},e.prototype.get_u32=function(t){var e;return e=t+this.off,this.buf.bytes[e]|this.buf.bytes[e+1]<<8|this.buf.bytes[e+2]<<16|this.buf.bytes[e+3]<<24},e.prototype.set_i32=function(t,e){var o;return e&=4294967295,o=t+this.off,this.buf.bytes[o+3]=e>>24&255,this.buf.bytes[o+2]=e>>16&255,this.buf.bytes[o+1]=e>>8&255,void(this.buf.bytes[o]=255&e)},e.prototype.get_i32=function(t){var e,o;return e=t+this.off,o=this.buf.bytes[e]|this.buf.bytes[e+1]<<8|this.buf.bytes[e+2]<<16|this.buf.bytes[e+3]<<24,o>2147483647&&(o-=4294967296),o},e.prototype.set_u64=function(t,e){return this.set_u32(t,e)},e.prototype.get_u64=function(t){return this.get_u32(t)},e.prototype.set_i64=function(t,e){return this.set_i32(t,e)},e.prototype.get_i64=function(t){return this.get_i32(t)},e.prototype.set_string=function(t,e,o){var i,n,r,u,s;for(i=n=0,u=Math.min(e.length,o);u>=0?u>n:n>u;i=u>=0?++n:--n)this.buf.bytes[this.off+t+i]=e.charCodeAt(i);if(e.length<o)for(i=r=0,s=o-e.length;s>=0?s>r:r>s;i=s>=0?++r:--r)this.buf.bytes[this.off+t+e.length+i]=0;return void 0},e.prototype.get_string=function(t,e){var o,i,n,r;for(r="",o=i=0,n=e;n>=0?n>i:i>n;o=n>=0?++i:--i)r+=String.fromCharCode(this.buf.bytes[this.off+t+o]);return r},e.prototype.get_float32=function(t){return s(this.buf.bytes,t+this.off)},e.prototype.get_float64=function(t){return u(this.buf.bytes,t+this.off)},e.prototype.set_float32=function(t,e){return r(this.buf.bytes,t+this.off,e)},e.prototype.set_float64=function(t,e){return n(this.buf.bytes,t+this.off,e)},e}(),i().ByteBuffer=t.ByteBuffer,i().Block=t.Block,i().util=t.util,i().block=t.create_block_type}).call(this);