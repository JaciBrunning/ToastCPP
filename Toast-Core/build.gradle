apply_cpp(project)
apply from: 'libraries/libraries.gradle'

model {
    components {
        toast_core(NativeLibrarySpec) {
            component_spec(it, project)
            
            binaries.all {
                // Mongoose
                cppCompiler.define "MG_DISABLE_MQTT"
                cppCompiler.define "MG_DISABLE_JSON_RPC"
                cppCompiler.define "MG_DISABLE_JSON_RPC"
                cppCompiler.define "MG_DISABLE_HTTP_KEEP_ALIVE"
            }

            sources {
                cpp {
                    source {
                        srcDirs = []
                        srcDirs += libraries.src()
                        srcDirs += ['src']
                        includes = ['**/*.cpp', '**/*.c']
                    }
                    exportedHeaders {
                        srcDirs = ['include']
                        srcDirs += libraries.headers()
                    }
                }
            }
        }
    }
}